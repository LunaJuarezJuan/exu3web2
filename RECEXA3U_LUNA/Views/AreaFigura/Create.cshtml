@model RECEXA3U_LUNA.Models.AreaFigura

@{
    ViewBag.Title = "Registrar Cálculo de Área";
}

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="form-group">
        @Html.LabelFor(model => model.FiguraId)
        @Html.DropDownListFor(model => model.FiguraId, (SelectList)ViewBag.FiguraId, "-- Seleccione una figura --", new { @class = "form-control", @id = "figuraSelect" })
        @Html.ValidationMessageFor(model => model.FiguraId, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.Parametro1)
        @Html.EditorFor(model => model.Parametro1, new { htmlAttributes = new { @class = "form-control", @step = "0.01", @type = "number" } })
        @Html.ValidationMessageFor(model => model.Parametro1, "", new { @class = "text-danger" })
    </div>

    <div class="form-group" id="param2Group">
        @Html.LabelFor(model => model.Parametro2)
        @Html.EditorFor(model => model.Parametro2, new { htmlAttributes = new { @class = "form-control", @step = "0.01", @type = "number" } })
        @Html.ValidationMessageFor(model => model.Parametro2, "", new { @class = "text-danger" })
    </div>

    <div class="form-group" id="param3Group">
        @Html.LabelFor(model => model.Parametro3)
        @Html.EditorFor(model => model.Parametro3, new { htmlAttributes = new { @class = "form-control", @step = "0.01", @type = "number" } })
        @Html.ValidationMessageFor(model => model.Parametro3, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.Observaciones)
        @Html.TextAreaFor(model => model.Observaciones, new { @class = "form-control", rows = 3 })
        @Html.ValidationMessageFor(model => model.Observaciones, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        <input type="submit" value="Registrar" class="btn btn-primary" />
        @Html.ActionLink("Cancelar", "Index", null, new { @class = "btn btn-default" })
    </div>
}

@section Scripts {
    <script>
        $(function () {
            function toggleParams() {
                var selectedText = $('#figuraSelect option:selected').text().toLowerCase();
                $('#param2Group, #param3Group').hide();
                if (selectedText.includes("rectángulo")) {
                    $('#param2Group').show();
                } else if (selectedText.includes("triángulo")) {
                    $('#param2Group, #param3Group').show();
                }
            }

            toggleParams();
            $('#figuraSelect').change(toggleParams);
        });
    </script>
}
